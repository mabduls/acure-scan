<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#27374D" />
    <title>Care Acne Application</title>
    <link rel="apple-touch-icon" href="favicon.png" />
    <link rel="shortcut icon" href="favicon.png" />
</head>

<body>
    <main id="mainContent" class="min-h-screen"></main>
    <!-- File JS akan di-inject oleh webpack -->
    <script>
        // SPA Redirect Handler untuk GitHub Pages
        (function () {
            const repoName = 'acure-scan';
            const basePath = `/${repoName}/`;

            console.log('SPA Redirect Handler initialized');
            console.log('Current location:', window.location.href);

            // Handle redirect dari sessionStorage
            const originalPath = sessionStorage.getItem('originalPath');
            const spaRedirect = sessionStorage.getItem('spaRedirect');

            if (originalPath) {
                console.log('Original path from 404:', originalPath);
                sessionStorage.removeItem('originalPath');

                // Convert to hash route untuk SPA
                const hashRoute = originalPath.replace(basePath, '/').replace(/^\//, '');
                if (hashRoute && !hashRoute.includes('.')) {
                    window.location.hash = '#/' + hashRoute;
                    console.log('Redirecting to hash:', '#/' + hashRoute);
                }
            }

            if (spaRedirect) {
                console.log('SPA redirect path:', spaRedirect);
                sessionStorage.removeItem('spaRedirect');

                const hashRoute = spaRedirect.replace(basePath, '/').replace(/^\//, '');
                if (hashRoute && !hashRoute.includes('.')) {
                    window.location.hash = '#/' + hashRoute;
                    console.log('SPA redirect to hash:', '#/' + hashRoute);
                }
            }

            // Handle case dimana user langsung mengakses root
            if (window.location.pathname === '/' || window.location.pathname === '/index.html') {
                console.log('Root access detected, redirecting to base path');
                window.location.href = basePath + (window.location.hash || '#/');
            }
        })();
    </script>
</body>

</html>